<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" type="text/css" href="style.css"/ >
</head>
<body>

<div id="errormsg">Error!! No Data!</div>
<div class="transparent" id="temp">
</div>
<div class="transparent" id="windSpeed"></div>
<div id="time">
</div>
<img id="pinwheel" src="pinwheel-white.png" />
<div id="footer">&nbsp;</div>
  
</body>
<script src="jquery/jquery-3.1.0.min.js"></script>
<script src="color_ramp.js"></script>

<script type="text/javascript">

$(document).ready(function (){
  
  getWeatherData();
  
  function getWeatherData(){
    $.getJSON('output.json', function (data) {

      temp = data.current_temp_c;
      windSpeed = data.wind_speed_kmh;
      windDirection = data.wind_cardinal_direction;
      
      //temp = -7;
      //windSpeed = 55;
      
      $("#pinwheel").removeClass();
      
      if (windSpeed > 50){
        $("#pinwheel").addClass("gale");
      } else if (windSpeed > 35){
        $("#pinwheel").addClass("heavyWind");
      } else if(windSpeed > 25 ) {
        $("#pinwheel").addClass("moderateWind");
      } else if(windSpeed > 10 ){
        $("#pinwheel").addClass("moderateLightWind");
      } else if(windSpeed > 0 ){
        $("#pinwheel").addClass("lightWind");
      } else {
        $("#pinwheel").addClass("calm");
      }
      

      $("#errormsg").text("");
      $("#windSpeed").text(windSpeed + "km/h " + windDirection);
      $("#temp").text(temp + "Â°");
      $("#time").text(data.time);
      $("body").css("background-color", getColorFromTemp(temp));
      if(temp < 7) {
        $(".transparent").css("color","black");
        $(".transparent").css("opacity","0.07");
      } else {
        $(".transparent").css("color","white");
        $(".transparent").css("opacity","0.3");
      }
      setTimeout(getWeatherData, 30000);
    });
  }
});

</script>  
</html>